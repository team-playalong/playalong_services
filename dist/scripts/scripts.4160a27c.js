"use strict";angular.module("playalong.services",["firebase"]),angular.module("playalong.services").controller("MainCtrl",["$scope","config","$http","chords",function(a,b,c,d){a.chordRef=null,a.addChord=function(){c.get(b.paths.mocks.hebrewChord).success(function(b){d.addChord(b).then(function(b){a.chordRef=b,a.chordRef.$bindTo(a,"newChord").then(function(){console.log("binded!")})})})},a.getChordById=function(){d.getChordById(1).then(function(b){a.resultJson=b})["catch"](function(b){a.resultJson=b})},a.searchBy="artist",a.searchChord=function(b,c){d.searchChordsBy(b,c).then(function(b){a.resultJson=b})["catch"](function(b){a.resultJson=b})}}]),angular.module("playalong.services").constant("config",{paths:{firebase:"https://playalong.firebaseio.com",mocks:{singleChord:"mocks/singleChord.json",hebrewChord:"mocks/hebrewChord.json"}}}),angular.module("playalong.services").factory("chords",["config","$firebaseArray","$q","$firebaseObject",function(a,b,c,d){function e(a){var b=i.$add(a).then(function(a){return d(a)});return b}function f(a){var b=c.defer();return h.orderByChild("id").equalTo(a).on("value",function(c){var d=c.val();d||b.reject("No Chord with Id "+a);var e;angular.forEach(d,function(a){e=a}),b.resolve(e)}),b.promise}function g(a,b){var d=c.defer();return h.orderByChild(a).startAt(b).endAt(b+"~").on("value",function(c){var e=c.val();e||d.reject("No results for query "+b+", search by "+a);var f;angular.forEach(e,function(a){f=a}),d.resolve(f)}),d.promise}var h=new Firebase(a.paths.firebase+"/chords"),i=b(h);return{addChord:e,getChordById:f,searchChordsBy:g}}]),angular.module("playalong.services").run(["$templateCache",function(a){a.put("views/main.html",'<div class="container"> <div class="form-group"> <button class="btn btn-md" ng-click="addChord()">Add Chord</button> </div> <pre>{{newChord | json}}</pre> <textarea ng-model="newChord.artist"></textarea> <div class="form-group"> <label>Chord id</label> <div class="form-control"> <input type="text" ng-model="chordId"> </div> </div> <div class="form-group"> <button class="btn btn-defaults" ng-click="getChordById()">Search chord by id</button> </div> <div class="form-group"> <label for="searchBy">Search By</label> <select id="searchBy" ng-model="searchBy" id="" class="form-control"> <option value="artist" selected>artist</option> <option value="title">title</option> </select> </div> <div class="form-group"> <label for="searchText">Text</label> <input class="form-control" type="text" ng-model="searchText"> </div> <button class="form-control btn btn-primary" ng-click="searchChord(searchBy,searchText)">Search Chord</button> <div class="container"> <pre>\n    {{resultJson | json}}\n  </pre> </div> </div>')}]);